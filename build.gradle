buildscript {

  repositories {
    mavenCentral()
    maven {
      url "https://oss.sonatype.org/content/groups/public"
    }
    mavenLocal()
  }

  dependencies {
    classpath "io.soffa.gradle:soffa-gradle-plugin:0.1.7"
  }
}


subprojects {
  apply plugin: 'io.soffa.java'
  apply plugin: 'maven-publish'

  repositories {
    mavenCentral()
    mavenLocal()
  }

  // ------------------------------------------------------------------------------------------------------------------

  repositories {
    mavenLocal()
    mavenCentral()
    maven {
      url "https://oss.sonatype.org/content/groups/public"
    }
    jcenter()
  }

  publishing {

    publications {
      maven(MavenPublication) {
        from project.components.java
        groupId = project.property("group")
        artifactId = project.name
      }
    }

    repositories {
      maven {
        def releasesRepoUrl = "https://maven.pkg.github.com/startupstation"
        def snapshotsRepoUrl = "https://maven.pkg.github.com/startupstation"
        url = project.property("version").endsWith('-SNAPSHOT') ? snapshotsRepoUrl : releasesRepoUrl
        credentials {
          username = System.getenv("GITHUB_USER")
          password = System.getenv("GITHUB_TOKEN")
        }
      }
    }
  }


}

/*
nexusStaging {
  packageGroup = "io.soffa"
  // stagingId = UUID.randomUUID().toString()
}*/

// task releaseLocal(dependsOn: ['clean', 'test', 'install', 'uploadArchives'])
// gradle clean uploadArchives closeAndReleaseRepository -Prelease=true


